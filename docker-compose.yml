services:
  acs-sql:
    container_name: acs-sql
    image: mcr.microsoft.com/mssql/server:2022-latest
    user: root
    ports:
      - "1433:1433"
    environment:
      - ACCEPT_EULA=Y
      - MSSQL_SA_PASSWORD=SSMC_Admin_2024!
    volumes:
      - ./sql_backup:/var/opt/mssql/backup

  backend:
    container_name: acs-backend
    build: ./server
    ports:
      - "3000:3000"
    environment:
      - DB_SERVER=acs-sql
      - DB_USER=acs_reader
      - DB_PASSWORD=SecurePass123!
      - DB_NAME=cms
      - PORT=3000
    depends_on:
      - acs-sql

  frontend:
    container_name: acs-frontend
    build: ./client
    ports:
      - "80:80"
    depends_on:
      - backend
